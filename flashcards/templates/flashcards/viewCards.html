{% extends 'flashcards/layout.html' %}

{% block title %}{{ deck.name }}{% endblock %}

{% block content %}
<div class="d-flex justify-content-center align-items-center min-vh-100" style="margin-top: -100px;">
  <div style="width: 100%; max-width: 500px;">
    <div class="card shadow rounded" style="max-height: 80vh; overflow-y: auto;">
      
      <!-- Card Header -->
      <div class="card-header bg-dark text-white d-flex justify-content-between align-items-center">
        <span>{{ deck.name }}</span>
        <div>
          <a href="{% url 'viewDeck' deck.id %}" class="btn btn-sm btn-light">Back</a>
          <a href="{% url 'addCard' deck.id %}" class="btn btn-sm btn-primary">Add Card</a>
        </div>
      </div>

      <!-- Card Body -->
      <div class="card-body d-flex flex-wrap gap-2 justify-content-start">
        {% if cards %}
          {% for card in cards %}
            <div class="card shadow-sm position-relative card-hover" style="width: 200px;">
              <div class="card-body text-center">
                <p class="card-text"><strong>{{ card.front }}</strong></p>
                <hr>
                <p class="card-text"><strong>{{ card.back }}</strong></p>
              </div>
              <div class="card-footer text-muted small text-center">
                Created: {{ card.created_at|date:"M d, Y" }}
              </div>

              <!-- Hover Actions -->
              <div class="card-actions position-absolute top-0 end-0 p-2" style="display: none;">
                <a href="{% url 'editCard' card.id %}" class="text-primary me-2" title="Edit">
                  <i class="bi bi-pencil-square"></i>
                </a>
                <a href="{% url 'deleteCard' card.id %}" class="text-danger" title="Delete"
                   onclick="return confirm('Are you sure you want to delete this card?');">
                  <i class="bi bi-trash"></i>
                </a>
              </div>
            </div>
          {% endfor %}
        {% else %}
          <p class="text-muted">No cards in this deck yet.</p>
        {% endif %}
      </div>

    </div>
  </div>
</div>
{% endblock %}
